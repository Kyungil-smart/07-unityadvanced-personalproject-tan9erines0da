# 게임 플로우 기획
## 필요 데이터 구조
1. 최고기록 - 랭크, 달성 캐릭터, 점수 (json 같은 런타임 외에서 기록 필요)(Rank, CharacterID, Score)
2. 버프 중복 및 가중치 - 버프 3개가 모두 똑같은 것이 나오지 않도록 중복 제거 로직이 필요, 특정 등급(희귀/일반)의 버프가 나올 확률을 인스펙터에서 조절할 수 있게 SO(ScriptableObject)화

## 타이틀 씬 (Title Scene)
게임의 첫 인상을 결정하며, 핵심 메뉴와 설정에 접근하는 공간입니다.

### 1. 시각적 구성
* 배경: 게임 테마가 반영된 정지 이미지 또는 루핑 애니메이션.

* 타이틀: 상단 중앙에 게임 로고 배치.

* 중앙 메뉴 (3-Button): 화면 중앙에 수직 정렬.

    * 게임 시작 (Game Start): 클릭 시 '캐릭터 선택 씬'으로 이동.

    * 최고 기록 (Leaderboard): 클릭 시 '기록 팝업' 활성화.

* 게임 종료 (Quit): 어플리케이션 종료.

* 사운드 설정: 우측 상단 스피커 아이콘 배치. 클릭 시 볼륨 조절 슬라이더(BGM/SFX) 팝업 노출.

### 2. 기록 팝업 (Leaderboard)
* 구성: TOP 10 기록 리스트를 차트 형식으로 표시.

* 항목: [순위 | 캐릭터 스프라이트 | 달성 점수]

* 특이사항: 1-3위는 강조 테두리 및 다른 색상의 순위 표시로 차별화

## 공통 연출 (Global Transition)
* 화면 전환: 'Black Slide' 효과 통일.

    * 검은색 패널이 왼쪽에서 오른쪽으로 슬라이드하며 화면을 덮고, 새로운 씬에서 다시 오른쪽으로 빠져나가는 방식.

* 사운드 조절: 모든 씬 우측 상단에 스피커 아이콘을 배치하여 일관된 볼륨 조절 제공.

## 캐릭터 선택 씬 (Character Selection Scene)
플레이어가 모험을 시작 할 캐릭터를 결정하고 정보를 확인하는 단계입니다.

### 1. 시각적 구성
* 좌측 (Preview): 선택된 캐릭터의 전신 스프라이트 노출.

* 우측 (Info): 캐릭터 이름, 스킬 아이콘 및 설명 텍스트. 가장 아래 '선택 확정' 버튼 배치.

* 하단 (Selection Bar): 캐릭터 아이콘(정사각형)들이 수평으로 나열됨. Horizontal Layout Group을 통해 캐릭터 수에 따라 간격 자동 조절.


### 2. 기능 및 연출
* 스킬 프리뷰: 스킬 아이콘 클릭 시 해당 스킬 사용 렌더 이미지를 보여주는 오버레이 창 활성화. 배경 클릭 또는 ESC로 닫기.

* 이동 규칙: ESC 입력 시 기록 저장 없이 '타이틀 씬'으로 즉시 복귀.

## 경로 선택 씬 (Way Selection Scene)
로그라이크 요소가 가미된 전략적 맵 탐색 단계. 이 씬에 진입하는 순간부터 공식 게임 세션이 시작.

### 1. 맵 구조 (Tree Structure)
* 단계: 총 10단계(0~10단계)로 구성된 횡스크롤 트리.

* 0단계 (Start): 캐릭터 아이콘이 대기하는 시작 지점. 1단계의 모든 노드와 연결됨.

* 10단계 (Finish): 모든 분기가 하나로 모이는 최종 러닝맵 노드.

* 노드 타입 및 가중치 (2~9단계):

    * 러닝맵 (Running): 가중치 6 (기본 모드)

    * 이벤트맵 (Event): 가중치 2 (랜덤 이벤트)

    * 상점맵 (Shop): 가중치 2 (아이템 구매)

    * 각 노드는 최소 1개, 최대 2개의 다음 단계 노드와 연결

### 2. UI 및 조작
* 내비게이션: Scroll Rect를 통한 가로 드래그 및 휠 조작. 부드러운 관성(Inertia) 적용.

* 상단 가이드: [아이콘] : 설명 형태의 범례 상시 노출.

* 종합 점수 및 보유 코인 : 좌상단에 [보석 아이콘], [동전 아이콘]과 숫자 텍스트로 표시

* 노드/간선 연출:

    * 지나온 길은 검은색, 예정된 길은 회색 간선으로 표시.

    * 선택 가능한 노드는 추가적인 붉은색 원 아이콘으로 표시.

    * 활성화된 노드 클릭 시 즉시 해당 맵으로 진입.

* 버프 확인: 좌상단 버튼(버프 1개 이상 획득 시 노출). 클릭 시 * 버프 아이콘/설명 *  차트형 팝업 노출.

### 3. 세션 관리 및 메뉴
* ESC 시스템: 팝업 내 [계속하기 / 중단하기 / 게임 종료] 버튼 제공.

* 중단하기: 현재 점수 정산 후 '엔딩 스코어 씬'으로 이동.

## 러닝 맵 (Running Map)
플레이어의 조작과 전략이 실시간으로 발휘되는 핵심 게임 플레이 공간

### 1. 시각적 구성 및 UI 배치
* 상단 중앙 (HP Slider): 현재 체력을 표시하는 슬라이더. 최대 체력과 보너스 체력의 합산하여 적용, 소모 주기에 따라 실시간으로 감소.
* 좌측 상단 (Score & Coin): 스프라이트 숫자로 구현된 현재 점수 및 코인 개수 표시.
* 우측 하단 (Skill Slots): 캐릭터별 스킬 아이콘 가로 우측 정렬 배치.
    * 비활성화 및 쿨타임: 회색 음영 처리 및 시계 방향으로 지워지는 Radial Fill 연출(숫자 표기 없음).
* 중앙 화면: 캐릭터, 장애물, 획득물(6종) 배치. 획득물별 고유 파티클 효과 적용.

### 2. 게임 메커니즘
* 주행 방식: 골 포인트 없이 체력이 0이 되거나 낙사할 때까지 주행하는 무한 루프 방식.
* 체력 시스템: 정수형 체력을 기반으로 하며, 체력 감소 속도 능력치와 맵 가중치에 따라 감소 주기 결정. 새로운 러닝 맵 진입 시 체력 초기화(최대 체력 + 보너스 체력).
* 카메라: y축 움직임을 제한하고 x축으로 캐릭터를 따라 이동.
* 피격 연출: 장애물 충돌 시 무적 시간 동안 캐릭터 점멸 및 화면 외곽 비네팅(Vignette) 볼륨 효과 적용. 이벤트 채널을 통해 시각 효과 동기화.

### 3. 러닝 종료 및 정산 프로세스
* 사망 연출: 체력 0 또는 낙사 시 전용 사운드 출력 후 즉시 블랙 슬라이드(Black Slide)로 화면 암전.
* 미니 결과창 (암전 상태): [이전 종합 점수 + 획득 점수], [보유 코인 + 획득 코인] 정보 표시.
    * 0.5초 경과 또는 클릭 시 숫자 합산 연출 진행 후 '보상 확인' 버튼 활성화.
* 버프 선택창: 보상 확인 클릭 시 진입. 무작위 버프 3종 중 1개 선택.
    * 선택 시 해당 항목 아웃라인 강조 및 '다음으로' 버튼 활성화.
* 복귀: '다음으로' 클릭 시 블랙 슬라이드 연출과 함께 '경로 선택 씬'으로 이동. 복귀 시 캐릭터 아이콘은 방금 클리어한 노드 위에 위치.

### 4. 세션 관리
* 일시정지 (ESC): 러닝 중 ESC 입력 시 일시정지 팝업 활성화.
    * 팝업 구성: 계속하기, 중단하기, 게임 종료 버튼 제공.
    * 특이사항: 일시정지 상태에서만 좌상단(버프 확인), 우상단(사운드 설정) 아이콘 활성화.

## 이벤트 맵 (Event Map)
플레이어에게 선택에 따른 리스크와 보상을 제공하는 전략적 휴식 공간입니다.

### 1. 시각적 구성 및 UI 배치
* 배경 및 중앙 이미지: 현재 이벤트의 테마를 보여주는 일러스트 배경과 사건/NPC 상징 이미지 배치.
* 중앙 텍스트 박스: 현재 상황을 설명하는 지문 출력.
* 하단 선택지 버튼: 2~4개의 버튼 배치. (조건에 따라 활성화/비활성화)
* 공통 UI 유지: 좌상단 종합 점수/코인 표시 및 우상단 사운드 설정 아이콘 유지.

### 2. 이벤트 시스템 및 작동 방식
* 데이터 중심(Data-driven) 구조: 각 이벤트는 여러 개의 노드(Node) 연결로 구성되어 다단계 선택지 지원 가능.
* 무작위 추출: 이벤트 노드 진입 시 전체 이벤트 테이블에서 하나를 무작위로 결정.
* 씬 흐름: 지문 읽기 -> 선택지 클릭 -> 결과 데이터 반영(체력, 점수, 코인, 버프 등) -> '떠나기' 버튼으로 경로 선택 씬 복귀.

### 3. 초기 구현 이벤트 목록
1. 기괴한 수집가: 체력 또는 코인을 대가로 지불하여 '무작위 버프' 획득 시도.
2. 버려진 외계인의 유물: 3가지 선택지(최대 체력 증가, 이동 속도 증가, 무작위 버프) 중 하나를 선택하여 즉시 획득.

## 상점 맵 (Shop Map)
획득한 코인을 소비하여 원하는 등급의 버프를 구매하는 전략적 강화 공간입니다.

### 1. 등급 체계 및 색상
* Relic (주황색): 최고 가치의 신물. 상점 내 1개 고정 출현.
* Artifact (흰색): 보존 상태가 양호한 유물. 상점 내 2개 고정 출현.
* Junk (회색): 흔하게 발견되는 잡동사니. 상점 내 3개 고정 출현.

### 2. 시각적 구성 및 UI 배치
* 2단 레이아웃: 
    - 우측: Relic(1개), Artifact(2개) 배치. 높은 등급일수록 좌측에 배치하여 시선 유도.
    - 좌측: Junk(3개) 배치. 상대적으로 작은 사이즈의 슬롯 구성.
* 보유 재화 표시: 좌상단에 보석(점수) 및 동전(코인) 아이콘과 숫자 상시 표시.
* 판매 완료 연출: 구매 시 해당 슬롯은 아이콘과 설명이 사라지고 'Sold Out' 표시
* 구매된 버프 확인 : 기존 버프 목록 아이콘을 상점맵에서도 유지하여 아이콘을 클릭해 확인 가능하도록 유도.

### 3. 작동 방식
* 품목 갱신: 상점 진입 시마다 각 등급별 무작위 버프가 지정된 수량(1-2-3)만큼 추출됨.
* 구매 연출: 구매 성공 시 동전 소리 연출, 구매 실패 시(코인 부족) 부저음 연출.

## 엔딩 스코어 씬 (Ending Score Scene)
최종 결과를 확인하고 세션을 마무리하는 정적인 정산 공간입니다.

### 1. 시각적 구성 및 UI 배치
* 배경: 암전 상태의 일관성을 위해 완전한 검은색(Solid Black) 배경 사용.
* 최종 스코어: 화면 상단 중앙에 특별한 애니메이션 없이 즉시 노출.
    - 최고 기록(1위) 경신 시, 스코어 상단에 'NEW BEST RECORD' 텍스트 추가 표시.
* 세션 요약 (중앙 구역):
    - 캐릭터 일러스트 (좌측): 이번 여정을 함께한 캐릭터 이미지 전시.
    - 버프 목록 (우측): 획득한 모든 버프 아이콘들을 등급별 색상 테두리와 함께 나열.
* 메뉴 버튼 (하단): '타이틀로 이동', '다시 시작' 버튼 배치.

### 2. 데이터 처리 및 저장
* 기록 비교: 씬 진입과 동시에 로컬 랭킹 데이터와 대조하여 순위권 진입 여부 판단.
* 데이터 저장: 버튼 클릭을 통해 씬을 이탈하는 시점에 로컬 저장소(JSON 등)에 랭킹 정보 최종 기록.

### 3. 연출 및 전환
* 씬 전환: 'Black Slide' 연출을 통한 화면 암전 상태를 활용하여 씬 이동 간 이질감 최소화.
* UI 출력: 암전이 유지되는 검은 배경 위에서 결과 UI만 즉시 활성화하여 미니 결과창과의 통일감 부여.